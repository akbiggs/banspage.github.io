<!DOCTYPE html>
<html>
  <head>
    <title>SSBU Stage Selector</title>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/custom.css">

    <script type="module" src="js/utils.js"></script>
    <script type="module" src="js/constants.js"></script>
    <script type="module" src="js/stage.js"></script>
    <script type="module" src="js/stage_parse.js"></script>
  </head>

  <body>
    <nav class="navbar" role="navigation" aria-label="main navigation">
      <div class="navbar-brand">
        <a class="navbar-item" onclick="window.location.reload()">
          SSBU Stage Selector
        </a>
    </nav>

    <main>
      <div class="container has-text-centered">
        <h1 class="title is-2">Loser: Pick Counterpicks</h1>
        <p>The loser of the previous round selects three stages. The winner will pick the stage for Game 2 from one of these three stages.</p>
      </div>

      <div id="stage-container" class="container has-text-centered">
      </div>

      <section class="section has-text-centered">
        <a class="button is-primary is-large" onclick="promptStageChoice()">Winner: Pick Stage</a>
        </br>
      </section>
    </main>

    <footer class="footer has-text-centered">
      <div class="container">
         <div class="columns">
          <div class="column is-8-desktop is-offset-2-desktop">
            <p>
              <strong class="has-text-weight-semibold">
                <a href="./index.html">SSBU Stage Selector</a>
              </strong>
            </p>
            <p>
              <small>
                <p>Forked from <a href="http://bans.page">Bans.Page</a>.</p>
              </small>
            </p>
            <p style="margin-top: 24px;">
              <a href="http://bulma.io">
                <img src="./img/made-with-bulma.png" alt="Made with Bulma" width="128" height="24">
              </a>
            </p>
          </div>
        </div>
      </div>
    </footer>
  </body>

  <script type="module">
      import {LEGAL_STAGES, CSS_CLASSES} from "./js/constants.js";
      import {createStageDiv} from "./js/stage.js";

      // TODO: Add option to remove stages from the previous game in the URL.
      const stageList = LEGAL_STAGES;

      const stageContainer = document.getElementById("stage-container");
      const stageDivList = stageList.map(createStageDiv);
      stageDivList.forEach((stageDiv) => {
          stageDiv.onclick = () => stageDiv.classList.toggle(CSS_CLASSES.STAGE_SELECTED);
          stageContainer.appendChild(stageDiv);
      });

      window.promptStageChoice = () => {
          window.location.href = "counterpicks.html" + window.location.hash;
      }
  </script>
</html>
